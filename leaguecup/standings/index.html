<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, height=1080">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 1920px;
            height: 1080px;
            background: transparent;
            font-family: 'Inter', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .container {
            width: 1800px;
            height: 950px;
            background: url('background.jpeg') center/cover no-repeat;
            border-radius: 30px;
            position: relative;
            overflow: hidden;
            opacity: 1;
            transition: opacity 1s;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 1;
        }

        .bracket-container {
            position: relative;
            width: 100%;
            height: 100%;
            z-index: 2;
        }

        .match-box {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 20px;
            position: absolute;
            opacity: 0;
            transform: scale(0.5);
            width: 280px;
            z-index: 10;
        }

        .match-box.show {
            animation: boxAppear 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes boxAppear {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .team {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 8px;
        }

        .team:last-child {
            margin-bottom: 0;
        }

        .team-logo {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5px;
            flex-shrink: 0;
        }

        .team-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .team-name {
            color: #fff;
            font-size: 16px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .vs-text {
            text-align: center;
            color: #fff;
            font-size: 22px;
            font-weight: 900;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
            margin: 8px 0;
        }

        /* Positioning */
        .q1-top { top: 80px; left: 80px; }
        .q1-bottom { top: 500px; left: 80px; }
        .q2-top { top: 80px; right: 80px; }
        .q2-bottom { top: 500px; right: 80px; }
        .semi-left { top: 290px; left: 450px; }
        .semi-right { top: 290px; right: 450px; }

        .cup-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 15;
            opacity: 0;
        }

        .cup-container.show {
            animation: cupAppear 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        .cup-image {
            width: 380px;
            height: auto;
            filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.8));
        }

        @keyframes cupAppear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0) rotate(-180deg);
                filter: drop-shadow(0 0 0px rgba(255, 215, 0, 0));
            }
            50% {
                filter: drop-shadow(0 0 50px rgba(255, 215, 0, 1));
            }
            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
                filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.8));
            }
        }

        /* SVG Lines Container */
        .lines-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }

        .connector-line {
            stroke: rgba(100, 200, 255, 0.8);
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            filter: drop-shadow(0 0 8px rgba(100, 200, 255, 0.8)) drop-shadow(0 0 15px rgba(100, 200, 255, 0.5));
        }

        .connector-line.draw {
            animation: drawLine 1s ease-out forwards;
        }

        @keyframes drawLine {
            to {
                stroke-dashoffset: 0;
            }
        }

    </style>
</head>
<body>
    <div class="container">
        <svg class="lines-svg" id="linesSvg"></svg>
        <div class="bracket-container" id="bracketContainer"></div>
        <div class="cup-container">
            <img src="cup.png" alt="Trophy" class="cup-image">
        </div>
    </div>

    <script>
        const bracketData = {
            "quarter_finals_left": [
                {
                    "team1": { "name": "Î¦Î›ÎŸÎ™Î£Î’ÎŸÎ£ MEMBERS PARON", "logo": "floisvos.png" },
                    "team2": { "name": "Î‘ÎŸÎ  ÎšÎ—Î¦Î™Î£Î™Î‘", "logo": "kifisia.png" }
                },
                {
                    "team1": { "name": "Î Î‘ÎŸÎš", "logo": "paok.png" },
                    "team2": { "name": "Î‘ÎŸÎÎ£ ÎœÎ™Î›Î©Î", "logo": "milon.png" }
                }
            ],
            "quarter_finals_right": [
                {
                    "team1": { "name": "ÎŸÎ›Î¥ÎœÎ Î™Î‘ÎšÎŸÎ£ Î£Î¦Î  ÎŸÎÎ•Î§", "logo": "olympiakos.png" },
                    "team2": { "name": "Î Î‘ÎÎ‘Î˜Î—ÎÎ‘Î™ÎšÎŸÎ£ Î‘ÎŸ", "logo": "panathinaikos.png" }
                },
                {
                    "team1": { "name": "Î‘ÎŸ Î¦ÎŸÎ™ÎÎ™ÎšÎ‘Î£ Î£Î¥Î¡ÎŸÎ¥", "logo": "foinikas.png" },
                    "team2": { "name": "ÎŸÎ¦Î—", "logo": "ofi.png" }
                }
            ],
            "semi_finals_left": {
                "team1": { "name": "ÎÎ™ÎšÎ—Î¤Î—Î£ 1", "logo": "" },
                "team2": { "name": "ÎÎ™ÎšÎ—Î¤Î—Î£ 2", "logo": "" }
            },
            "semi_finals_right": {
                "team1": { "name": "ÎÎ™ÎšÎ—Î¤Î—Î£ 3", "logo": "" },
                "team2": { "name": "ÎÎ™ÎšÎ—Î¤Î—Î£ 4", "logo": "" }
            }
        };

        let currentAnimationTimeout = null;

        function createMatchBox(match, className) {
            const box = document.createElement('div');
            box.className = `match-box ${className}`;
            box.innerHTML = `
                <div class="team">
                    <div class="team-logo">
                        <img src="${match.team1.logo}" alt="${match.team1.name}">
                    </div>
                    <div class="team-name">${match.team1.name}</div>
                </div>
                <div class="vs-text">VS</div>
                <div class="team">
                    <div class="team-logo">
                        <img src="${match.team2.logo}" alt="${match.team2.name}">
                    </div>
                    <div class="team-name">${match.team2.name}</div>
                </div>
            `;

            const isSemi = !match.team1.logo || match.team1.logo === '';
            
            box.innerHTML = `
                <div class="team">
                    <div class="team-logo">
                        ${isSemi ? '<span style="font-size: 28px;">ğŸ</span>' : `<img src="${match.team1.logo}" alt="${match.team1.name}">`}
                    </div>
                    <div class="team-name">${match.team1.name}</div>
                </div>
                <div class="vs-text">VS</div>
                <div class="team">
                    <div class="team-logo">
                        ${isSemi ? '<span style="font-size: 28px;">ğŸ</span>' : `<img src="${match.team2.logo}" alt="${match.team2.name}">`}
                    </div>
                    <div class="team-name">${match.team2.name}</div>
                </div>
            `;
            return box;
        }

        function createLine(d, className) {
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('d', d);
            path.setAttribute('class', `connector-line ${className}`);
            return path;
        }

        function getBoxPositions() {
            const q1Top = document.querySelector('.q1-top');
            const q1Bottom = document.querySelector('.q1-bottom');
            const q2Top = document.querySelector('.q2-top');
            const q2Bottom = document.querySelector('.q2-bottom');
            const semiLeft = document.querySelector('.semi-left');
            const semiRight = document.querySelector('.semi-right');
            
            const containerRect = document.querySelector('.bracket-container').getBoundingClientRect();

            const getPos = (element) => {
                if (!element) return null;
                const rect = element.getBoundingClientRect();
                return {
                    left: rect.left - containerRect.left,
                    right: rect.right - containerRect.left,
                    centerY: rect.top - containerRect.top + rect.height / 2
                };
            };

            return {
                q1Top: getPos(q1Top),
                q1Bottom: getPos(q1Bottom),
                q2Top: getPos(q2Top),
                q2Bottom: getPos(q2Bottom),
                semiLeft: getPos(semiLeft),
                semiRight: getPos(semiRight),
                cupX: containerRect.width / 2,
                cupY: containerRect.height / 2
            };
        }

        function drawLeftQuarterLines(positions) {
            const svg = document.getElementById('linesSvg');
            const { q1Top, q1Bottom, semiLeft } = positions;
            
            const leftMidY = (q1Top.centerY + q1Bottom.centerY) / 2;
            
            // Line from q1-top to junction
            const path1 = `M ${q1Top.right} ${q1Top.centerY} L ${q1Top.right + 60} ${q1Top.centerY} L ${q1Top.right + 60} ${leftMidY}`;
            const line1 = createLine(path1, 'line-q1-top');
            svg.appendChild(line1);
            
            // Line from q1-bottom to junction
            const path2 = `M ${q1Bottom.right} ${q1Bottom.centerY} L ${q1Bottom.right + 60} ${q1Bottom.centerY} L ${q1Bottom.right + 60} ${leftMidY}`;
            const line2 = createLine(path2, 'line-q1-bottom');
            svg.appendChild(line2);
            
            // Line from junction to semi-left
            const path3 = `M ${q1Top.right + 60} ${leftMidY} L ${semiLeft.left - 70} ${leftMidY} L ${semiLeft.left - 70} ${semiLeft.centerY}`;
            const line3 = createLine(path3, 'line-to-semi-left');
            svg.appendChild(line3);
            
            return [line1, line2, line3];
        }

        function drawRightQuarterLines(positions) {
            const svg = document.getElementById('linesSvg');
            const { q2Top, q2Bottom, semiRight } = positions;
            
            const rightMidY = (q2Top.centerY + q2Bottom.centerY) / 2;
            
            // Line from q2-top to junction
            const path1 = `M ${q2Top.left} ${q2Top.centerY} L ${q2Top.left - 60} ${q2Top.centerY} L ${q2Top.left - 60} ${rightMidY}`;
            const line1 = createLine(path1, 'line-q2-top');
            svg.appendChild(line1);
            
            // Line from q2-bottom to junction
            const path2 = `M ${q2Bottom.left} ${q2Bottom.centerY} L ${q2Bottom.left - 60} ${q2Bottom.centerY} L ${q2Bottom.left - 60} ${rightMidY}`;
            const line2 = createLine(path2, 'line-q2-bottom');
            svg.appendChild(line2);
            
            // Line from junction to semi-right
            const path3 = `M ${q2Top.left - 60} ${rightMidY} L ${semiRight.right + 70} ${rightMidY} L ${semiRight.right + 70} ${semiRight.centerY}`;
            const line3 = createLine(path3, 'line-to-semi-right');
            svg.appendChild(line3);
            
            return [line1, line2, line3];
        }

        function drawSemiToCupLines(positions) {
            const svg = document.getElementById('linesSvg');
            const { semiLeft, semiRight, cupX, cupY } = positions;
            
            // Line from semi-left to cup
            const path1 = `M ${semiLeft.right} ${semiLeft.centerY} L ${cupX - 100} ${semiLeft.centerY} L ${cupX - 100} ${cupY}`;
            const line1 = createLine(path1, 'line-semi-left-cup');
            svg.appendChild(line1);
            
            // Line from semi-right to cup
            const path2 = `M ${semiRight.left} ${semiRight.centerY} L ${cupX + 100} ${semiRight.centerY} L ${cupX + 100} ${cupY}`;
            const line2 = createLine(path2, 'line-semi-right-cup');
            svg.appendChild(line2);
            
            return [line1, line2];
        }

        async function runAnimationSequence() {
            const q1Top = document.querySelector('.q1-top');
            const q1Bottom = document.querySelector('.q1-bottom');
            const q2Top = document.querySelector('.q2-top');
            const q2Bottom = document.querySelector('.q2-bottom');
            const semiLeft = document.querySelector('.semi-left');
            const semiRight = document.querySelector('.semi-right');
            const cupContainer = document.querySelector('.cup-container');
            
            // Step 1: Show Q1 Top (TEAM 1 vs KIFISIA)
            q1Top.classList.add('show');
            //await wait(1500);
            
            // Step 2: Show Q1 Bottom (PAOK vs TEAM 4)
            q1Bottom.classList.add('show');
            await wait(1500);
            
            // Step 4: Show Q2 Top (OLYMPIACOS vs PANATHINAIKOS)
            q2Top.classList.add('show');
            //await wait(1500);
            
            // Step 5: Show Q2 Bottom (TEAM 7 vs OFI)
            q2Bottom.classList.add('show');
            await wait(1500);

            // Step 3: Draw lines from Q1 to Semi-Left, then show Semi-Left box
            await wait(200); // Small delay for positioning
            const positions = getBoxPositions();
            const leftLines = drawLeftQuarterLines(positions);
            const positions2 = getBoxPositions();
            const rightLines = drawRightQuarterLines(positions2);
            leftLines.forEach(line => line.classList.add('draw'));
            rightLines.forEach(line => line.classList.add('draw'));
            await wait(1200);
            semiLeft.classList.add('show');
            semiRight.classList.add('show');
            //await wait(1500);
            
            // Step 6: Draw lines from Q2 to Semi-Right, then show Semi-Right box
            /*await wait(200);
            const positions2 = getBoxPositions();
            const rightLines = drawRightQuarterLines(positions2);
            rightLines.forEach(line => line.classList.add('draw'));
            await wait(1200);
            semiRight.classList.add('show');
            await wait(1500);*/
            
            // Step 7: Draw lines from both semis to cup
            await wait(200);
            const positions3 = getBoxPositions();
            const cupLines = drawSemiToCupLines(positions3);
            cupLines.forEach(line => line.classList.add('draw'));
            //await wait(1200);
            
            // Step 8: Show cup with zoom and lighting
            cupContainer.classList.add('show');
            await wait(2000);
            
            // Hold final state for 30 seconds
            await wait(30000);
            
            // Fade out
            document.querySelector('.container').style.opacity = '0';
        }

        function wait(ms) {
            return new Promise(resolve => {
                currentAnimationTimeout = setTimeout(resolve, ms);
            });
        }

        function resetAnimation() {
            // Clear any running timeouts
            if (currentAnimationTimeout) {
                clearTimeout(currentAnimationTimeout);
            }
            
            // Reset container
            const container = document.querySelector('.container');
            container.style.opacity = '1';
            
            // Reset all boxes
            document.querySelectorAll('.match-box').forEach(box => {
                box.classList.remove('show');
            });
            
            // Reset cup
            document.querySelector('.cup-container').classList.remove('show');
            
            // Clear all lines
            document.getElementById('linesSvg').innerHTML = '';
        }

        function loadBracket() {
            const container = document.getElementById('bracketContainer');
            
            // Create all boxes
            container.appendChild(createMatchBox(bracketData.quarter_finals_left[0], 'q1-top'));
            container.appendChild(createMatchBox(bracketData.quarter_finals_left[1], 'q1-bottom'));
            container.appendChild(createMatchBox(bracketData.quarter_finals_right[0], 'q2-top'));
            container.appendChild(createMatchBox(bracketData.quarter_finals_right[1], 'q2-bottom'));
            container.appendChild(createMatchBox(bracketData.semi_finals_left, 'semi-left'));
            container.appendChild(createMatchBox(bracketData.semi_finals_right, 'semi-right'));

            // Start animation sequence
            setTimeout(() => {
                runAnimationSequence();
            }, 500);
        }

        async function loadBracketFromJSON() {
            try {
                const response = await fetch('bracket.json');
                if (response.ok) {
                    const data = await response.json();
                    Object.assign(bracketData, data);
                }
            } catch (error) {
                console.log('Using default bracket data');
            }
            loadBracket();
        }

        function restartAnimation() {
            resetAnimation();
            setTimeout(() => {
                runAnimationSequence();
            }, 100);
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadBracketFromJSON();
        });

        // Restart on visibility change
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                restartAnimation();
            }
        });

        // Restart on focus
        window.addEventListener('focus', function() {
            restartAnimation();
        });
    </script>
</body>
</html>
