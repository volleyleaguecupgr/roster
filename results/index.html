<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Αποτελέσματα Αγώνων - Match Results</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Inter',sans-serif; background:transparent; min-height:100vh; overflow:hidden; }

        .graphics-container { position:fixed; top:0; left:0; width:1920px; height:1080px;
            display:flex; justify-content:center; align-items:center;
            transform-origin:top left; transform:scale(calc(min(100vw / 1920px, 100vh / 1080px)));
            background:transparent; }

        .volleyball-3d-scene { position:absolute; top:0; left:0; width:1920px; height:1080px; z-index:3; pointer-events:none; }

        .moving-lines { position:absolute; top:0; left:0; width:1920px; height:1080px; overflow:hidden; z-index:2; pointer-events:none; }
        .line { position:absolute; height:3px; background:linear-gradient(90deg, transparent 0%, rgba(59,130,246,0.4) 20%, rgba(147,197,253,0.6) 50%, rgba(59,130,246,0.4) 80%, transparent 100%); border-radius:2px; box-shadow:0 0 15px rgba(59,130,246,0.3); }
        .line-1 { width:400px; top:15%; animation:moveLine1 12s linear infinite; }
        .line-2 { width:350px; top:35%; animation:moveLine2 10s linear infinite; }
        .line-3 { width:500px; top:55%; animation:moveLine3 14s linear infinite; }
        .line-4 { width:300px; top:75%; animation:moveLine4 11s linear infinite; }
        .line-5 { width:450px; top:25%; animation:moveLine5 9s linear infinite; }

        @keyframes moveLine1 {0%{left:-400px;opacity:0;}15%{opacity:1;}85%{opacity:1;}100%{left:1920px;opacity:0;}}
        @keyframes moveLine2 {0%{right:-350px;opacity:0;}15%{opacity:1;}85%{opacity:1;}100%{right:1920px;opacity:0;}}
        @keyframes moveLine3 {0%{left:-500px;opacity:0;}20%{opacity:1;}80%{opacity:1;}100%{left:1920px;opacity:0;}}
        @keyframes moveLine4 {0%{right:-300px;opacity:0;}15%{opacity:1;}85%{opacity:1;}100%{right:1920px;opacity:0;}}
        @keyframes moveLine5 {0%{right:-450px;opacity:0;}15%{opacity:1;}85%{opacity:1;}100%{right:1920px;opacity:0;}}

        .title { position:absolute; top:80px; left:50%; transform:translateX(-50%);
            font-size:38px; font-weight:900;
            background:linear-gradient(135deg, #f8fafc 0%, #3b82f6 100%);
            background-clip:text; -webkit-background-clip:text; -webkit-text-fill-color:transparent;
            text-shadow:0 0 30px rgba(59,130,246,0.8);
            z-index:15; opacity:0; transform:translateX(-50%) translateY(-30px);
            animation:titleSlideIn 2s ease-out 0.5s forwards; }
        @keyframes titleSlideIn { to { opacity:1; transform:translateX(-50%) translateY(0); } }

        .schedule-container { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
            width:1400px; z-index:10; opacity:0; transform:translate(-50%,-50%) translateY(50px);
            animation:containerSlideIn 1s ease-out 0.8s forwards; }
        @keyframes containerSlideIn { to{opacity:1; transform:translate(-50%,-50%) translateY(0);} }

        .schedule-table { width:100%; background:rgba(0,0,0,0.85); border-radius:25px; overflow:hidden; border:3px solid rgba(59,130,246,0.4); box-shadow:0 25px 80px rgba(0,0,0,0.6); }

        .game-row { 
            position:relative; overflow:hidden; display:grid; grid-template-columns:280px 1fr 280px; 
            align-items:center; gap:20px; padding:20px; border-bottom:1px solid rgba(59,130,246,0.2);
            opacity:0; transform:translateX(-150px) scale(0.95); 
            border-radius:15px; margin:5px; 
            box-shadow:0 0 0 rgba(59,130,246,0.5);
            animation:slideInScaleGlow 1.5s cubic-bezier(0.34,1.56,0.64,1) forwards; 
        }

        @keyframes slideInScaleGlow { 
            0% { opacity:0; transform:translateX(-150px) scale(0.95); box-shadow:0 0 0 rgba(59,130,246,0.5); }
            70% { box-shadow:0 0 30px rgba(59,130,246,0.8), 0 0 60px rgba(59,130,246,0.4); }
            100% { opacity:1; transform:translateX(0) scale(1); box-shadow:0 0 15px rgba(59,130,246,0.3); }
        }

        .home-team, .away-team { display:flex; align-items:center; gap:30px; }
        .away-team { justify-content:flex-end; }
        
        .team-logo img { 
            width:100px; height:100px; border-radius:50%; object-fit:contain;
            background:rgba(255,255,255,0.9); 
            box-shadow:0 6px 12px rgba(0,0,0,0.4); 
            border:3px solid rgba(255,255,255,0.8); 
            padding:5px;
        }
        
        .team-info { color:#fff; }
        .home-team .team-info { text-align: left; }
        .away-team .team-info { text-align: right; }
        .team-name { font-weight:700; font-size:24px; margin-bottom:3px; text-shadow:2px 2px 4px rgba(0,0,0,0.5); }
        .team-subtitle { font-size:16px; opacity:0.9; text-shadow:1px 1px 2px rgba(0,0,0,0.5); }

        .score-section { 
            display:flex; flex-direction:column; align-items:center; 
            gap:5px;
        }
        
        .main-score { 
            display:flex; align-items:center; gap:15px;
        }
        
        .home-score, .away-score { 
            font-size:48px; font-weight:900; color:#fff; 
            text-shadow:0 0 20px rgba(59,130,246,0.8);
            min-width:60px; text-align:center;
        }
        
        .score-separator { 
            font-size:32px; font-weight:900; color:#fff; 
            text-shadow:0 0 15px rgba(59,130,246,0.8);
        }

        .sets-container {
            display:flex; gap:8px; align-items:center;
            justify-content:center;
        }

        .set-score {
            display:flex; align-items:center; gap:4px;
            padding:4px 8px; border-radius:8px; font-size:14px; font-weight:700;
            color:#fff; text-shadow:1px 1px 2px rgba(0,0,0,0.5);
            min-width:50px; justify-content:center;
        }

        .set-label {
            font-size:12px; opacity:0.8; margin-right:4px;
        }

        .league-logo {
            position:absolute; bottom:30px; left:47%; transform:translateX(-50%);
            width:180px; height:180px; z-index:20;
            opacity:0; transform:translateX(-50%) scale(0.3);
            animation:logoZoomGlow 2s ease-out 4s forwards;
        }

        @keyframes logoZoomGlow {
            0% { opacity:0; transform:translateX(-50%) scale(0.3); }
            50% { opacity:1; transform:translateX(-50%) scale(1.1); filter:drop-shadow(0 0 30px #3b82f6); }
            100% { opacity:1; transform:translateX(-50%) scale(1); filter:drop-shadow(0 0 20px #3b82f6); }
        }

        .league-logo img {
            width:150%; height:150%; object-fit:contain;
            animation:logoGlow 3s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% { 
                filter:drop-shadow(0 0 20px rgba(59,130,246,0.6)) drop-shadow(0 0 40px rgba(59,130,246,0.3)) brightness(1);
            }
            50% { 
                filter:drop-shadow(0 0 30px rgba(59,130,246,0.8)) drop-shadow(0 0 60px rgba(59,130,246,0.5)) brightness(1.1);
            }
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-size: 24px;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div class="graphics-container" id="graphicsContainer">
        <div class="volleyball-3d-scene" id="volleyball-3d-scene"></div>
        <div class="moving-lines">
            <div class="line line-1"></div>
            <div class="line line-2"></div>
            <div class="line line-3"></div>
            <div class="line line-4"></div>
            <div class="line line-5"></div>
        </div>

        <div class="title" id="gamedayTitle">ΑΠΟΤΕΛΕΣΜΑΤΑ ΠΡΟΗΓΟΥΜΕΝΗΣ ΑΓΩΝΙΣΤΙΚΗΣ</div>
        <!-- <div class="loading" id="loading">Φόρτωση αποτελεσμάτων...</div> -->
        <div class="schedule-container">
            <div class="schedule-table" id="scheduleTable">
                <!-- Games will be dynamically loaded here -->
            </div>
        </div>

        <div class="league-logo">
            <img src="VL_logo.png" alt="Greek Volleyball League">
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Team data
        const teams = {
            'ΑΟΝΣ ΜΙΛΩΝ': { subtitle: '', logo: 'milon.png', color: '#228B22' },
            'ΑΟ ΚΑΛΑΜΑΤΑ 80 AFFIDEA': { subtitle: '', logo: 'kalamata.png', color: '#32CD32' },
            'Ο.Φ.Η.': { subtitle: '', logo: 'ofi.png', color: '#2c2c2c' },
            'ΑΟΠ ΚΗΦΙΣΙΑΣ': { subtitle: '', logo: 'kifisia.png', color: '#4169E1' },
            'Π.Α.Ο.Κ.': { subtitle: '', logo: 'paok.png', color: '#1a1a1a' },
            'ΑΟ ΦΟΙΝΙΚΑΣ ΣΥΡΟΥ': { subtitle: '', logo: 'foinikas.png', color: '#FF4500' },
            'ΠΑΝΙΩΝΙΟΣ': { subtitle: '', logo: 'panionios.png', color: '#DC143C' },
            'ΟΛΥΜΠΙΑΚΟΣ ΣΦΠ ΟΝΕΧ': { subtitle: '', logo: 'olympiakos.png', color: '#dc1414' },
            'ΠΑΝΑΘΗΝΑΪΚΟΣ AO': { subtitle: '', logo: 'panathinaikos.png', color: '#16a34a' },
            'ΑΟ ΦΛΟΙΣΒΟΣ MEMBERS PARON': { subtitle: '', logo: 'floisvos.png', color: '#1E90FF' }
        };

    async function loadResults() {
        try {
            const response = await fetch('volleyball-results.json');
            if (!response.ok) throw new Error('File not found');
            const gamedays = await response.json();
    
            if (!Array.isArray(gamedays) || gamedays.length === 0) {
                document.getElementById('loading').textContent = 'Δεν υπάρχουν αποτελέσματα';
                return;
            }
    
            // Get latest gameday
            const latestGameday = gamedays[gamedays.length - 1];
            document.getElementById('gamedayTitle').textContent = latestGameday.title || 'ΑΠΟΤΕΛΕΣΜΑΤΑ ΠΡΟΗΓΟΥΜΕΝΗΣ ΑΓΩΝΙΣΤΙΚΗΣ';
    
            if (!Array.isArray(latestGameday.games) || latestGameday.games.length === 0) {
                document.getElementById('loading').textContent = 'Δεν υπάρχουν αγώνες για αυτήν την αγωνιστική';
                return;
            }
    
            renderGames(latestGameday.games);
    
            document.getElementById('loading').style.display = 'none';
        } catch (error) {
            console.error('Error loading results:', error);
            document.getElementById('loading').textContent = 'Σφάλμα φόρτωσης αποτελεσμάτων';
        }
    }
    
    function renderGames(games) {
        const scheduleTable = document.getElementById('scheduleTable');
        scheduleTable.innerHTML = '';
    
        games.forEach((game, index) => {
            const homeTeam = teams[game.homeTeam] || { subtitle:'', logo:'default.png', color:'#888' };
            const awayTeam = teams[game.awayTeam] || { subtitle:'', logo:'default.png', color:'#888' };
    
            const gameRow = document.createElement('div');
            gameRow.className = 'game-row';
            gameRow.style.background = `linear-gradient(90deg, ${homeTeam.color} 0%, ${hexToRgba(homeTeam.color,0.7)} 30%, ${hexToRgba(awayTeam.color,0.7)} 70%, ${awayTeam.color} 100%)`;
            gameRow.style.animationDelay = `${1.5 + (index*0.3)}s`;
    
            let setsHTML = '';
            if (Array.isArray(game.sets)) {
                game.sets.forEach((set,setIndex)=>{
                    const winner = set.homePoints > set.awayPoints ? homeTeam.color : awayTeam.color;
                    setsHTML += `<div class="set-score" style="background:${winner};">
                                    <span class="set-label">${setIndex+1}ο</span> ${set.homePoints}-${set.awayPoints}
                                 </div>`;
                });
            }
    
            gameRow.innerHTML = `
                <div class="home-team">
                    <div class="team-logo"><img src="${homeTeam.logo}" alt="${game.homeTeam}"></div>
                    <div class="team-info">
                        <div class="team-name">${game.homeTeam}</div>
                        <div class="team-subtitle">${homeTeam.subtitle}</div>
                    </div>
                </div>
                <div class="score-section">
                    <div class="main-score">
                        <div class="home-score">${game.homeScore || 0}</div>
                        <div class="score-separator">-</div>
                        <div class="away-score">${game.awayScore || 0}</div>
                    </div>
                    <div class="sets-container">${setsHTML}</div>
                </div>
                <div class="away-team">
                    <div class="team-info">
                        <div class="team-name">${game.awayTeam}</div>
                        <div class="team-subtitle">${awayTeam.subtitle}</div>
                    </div>
                    <div class="team-logo"><img src="${awayTeam.logo}" alt="${game.awayTeam}"></div>
                </div>
            `;
            scheduleTable.appendChild(gameRow);
        });
    }


        function hexToRgba(hex, alpha) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }

        // 3D Volleyball Scene
        let scene, camera, renderer, volleyballs = [];
        let animationId;

        function init3D() {
            const container = document.getElementById('volleyball-3d-scene');
            
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, 1920 / 1080, 0.1, 1000);
            camera.position.set(0, 0, 15);
            
            renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(1920, 1080);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            container.appendChild(renderer.domElement);
            
            const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 10, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);

            createFlyingVolleyballs();
            animate3D();
        }

        function createVolleyball() {
            const volleyballGeometry = new THREE.SphereGeometry(2, 64, 64);
            
            const canvas = document.createElement('canvas');
            canvas.width = 1024;
            canvas.height = 1024;
            const ctx = canvas.getContext('2d');
            
            const centerX = 512;
            const centerY = 512;
            
            ctx.fillStyle = '#1e3a8a';
            ctx.fillRect(0, 0, 1024, 1024);
            
            ctx.fillStyle = '#fbbf24';
            
            ctx.beginPath();
            ctx.arc(centerX, centerY, 400, -Math.PI/2, 0);
            ctx.lineTo(centerX, centerY);
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(centerX, centerY, 400, Math.PI/2, Math.PI);
            ctx.lineTo(centerX, centerY);
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(centerX, centerY, 400, Math.PI, 3*Math.PI/2);
            ctx.lineTo(centerX, centerY);
            ctx.fill();
            
            ctx.strokeStyle = '#1a1a1a';
            ctx.lineWidth = 8;
            ctx.lineCap = 'round';
            
            ctx.beginPath();
            ctx.arc(centerX, centerY, 350, 0.3, Math.PI - 0.3);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.arc(centerX, centerY, 350, Math.PI + 0.3, 2 * Math.PI - 0.3);
            ctx.stroke();
            
            const volleyballTexture = new THREE.CanvasTexture(canvas);
            
            const volleyballMaterial = new THREE.MeshPhongMaterial({
                map: volleyballTexture,
                shininess: 25,
                specular: new THREE.Color(0x333333)
            });
            
            const volleyball = new THREE.Mesh(volleyballGeometry, volleyballMaterial);
            volleyball.castShadow = true;
            volleyball.receiveShadow = true;
            
            return volleyball;
        }

        function createFlyingVolleyballs() {
            for (let i = 0; i < 3; i++) {
                const volleyball = createVolleyball();
                
                volleyball.userData = {
                    speed: 0.8 + i * 0.3,
                    yOffset: (i - 1) * 8,
                    phase: i * Math.PI * 0.66,
                    direction: i % 2 === 0 ? 1 : -1
                };
                
                volleyball.position.set(
                    volleyball.userData.direction === 1 ? -25 : 25, 
                    volleyball.userData.yOffset, 
                    -5 + i * 2
                );
                
                volleyball.scale.set(0.8 + i * 0.1, 0.8 + i * 0.1, 0.8 + i * 0.1);
                
                volleyballs.push(volleyball);
                scene.add(volleyball);
            }
        }

        function animate3D() {
            animationId = requestAnimationFrame(animate3D);
            
            const time = Date.now() * 0.001;
            
            volleyballs.forEach((volleyball, index) => {
                const userData = volleyball.userData;
                const progress = (time * userData.speed + userData.phase) % (Math.PI * 2);
                
                const normalizedProgress = (Math.sin(progress) + 1) / 2;
                
                if (userData.direction === 1) {
                    const x = -25 + normalizedProgress * 50;
                    const y = userData.yOffset + Math.sin(normalizedProgress * Math.PI) * 6;
                    volleyball.position.set(x, y, volleyball.position.z);
                } else {
                    const x = 25 - normalizedProgress * 50;
                    const y = userData.yOffset + Math.sin(normalizedProgress * Math.PI) * 6;
                    volleyball.position.set(x, y, volleyball.position.z);
                }
                
                volleyball.rotation.x += 0.02 * userData.speed;
                volleyball.rotation.y += 0.015 * userData.speed;
                
                const scale = 0.8 + index * 0.1 + Math.sin(time * 2 + index) * 0.1;
                volleyball.scale.set(scale, scale, scale);
            });
            
            renderer.render(scene, camera);
        }

        function onWindowResize() {
            const scale = Math.min(window.innerWidth / 1920, window.innerHeight / 1080);
            document.querySelector('.graphics-container').style.transform = `scale(${scale})`;
        }

        function restartAnimation() {
            const container = document.getElementById('graphicsContainer');
            const title = document.querySelector('.title');
            const scheduleContainer = document.querySelector('.schedule-container');
            const rows = document.querySelectorAll('.game-row');
            const logo = document.querySelector('.league-logo');
            
            container.classList.add('loop-reset');
            container.offsetHeight;
            
            setTimeout(() => {
                container.classList.remove('loop-reset');
                
                title.style.animation = 'none';
                title.offsetHeight;
                title.style.animation = 'titleSlideIn 2s ease-out 0.5s forwards';
                
                scheduleContainer.style.animation = 'none';
                scheduleContainer.offsetHeight;
                scheduleContainer.style.animation = 'containerSlideIn 2s ease-out 1.5s forwards';
                
                rows.forEach((row, index) => {
                    row.style.animation = 'none';
                    row.offsetHeight;
                    row.style.animation = `slideInScaleGlow 2.5s cubic-bezier(0.34, 1.56, 0.64, 1) ${2.5 + (index * 0.3)}s forwards`;
                });

                logo.style.animation = 'none';
                logo.offsetHeight;
                logo.style.animation = 'logoZoomGlow 2s ease-out 4s forwards';
            }, 100);
        }

        function autoLoop() {
            setInterval(() => {
                restartAnimation();
            }, 20000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Enhanced Greek Volleyball Results loaded');
            
            loadResults();
            init3D();
            window.addEventListener('resize', onWindowResize);
            
            setTimeout(() => {
                restartAnimation();
            }, 100);
            
            setTimeout(() => {
                autoLoop();
            }, 10000);
        });

        window.addEventListener('beforeunload', function() {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            if (renderer) {
                renderer.dispose();
            }
        });
    </script>
</body>
</html>
